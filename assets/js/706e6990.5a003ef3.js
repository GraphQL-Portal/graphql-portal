(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{76:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return r})),t.d(n,"metadata",(function(){return c})),t.d(n,"toc",(function(){return s})),t.d(n,"default",(function(){return l}));var i=t(3),a=t(7),o=(t(0),t(84)),r={id:"api-definitions",title:"GraphQL API Definitions",sidebar_label:"GraphQL API Definitions"},c={unversionedId:"configuration/api-definitions",id:"configuration/api-definitions",isDocsHomePage:!1,title:"GraphQL API Definitions",description:"When not using Dashboard for configuration, the API Definitions are going to be read from the apis_path specified in",source:"@site/docs/configuration/api-definitions.md",slug:"/configuration/api-definitions",permalink:"/configuration/api-definitions",editUrl:"https://github.com/graphql-portal/graphql-portal/edit/master/website/docs/configuration/api-definitions.md",version:"current",sidebar_label:"GraphQL API Definitions",sidebar:"docs",previous:{title:"Gateway configuration options",permalink:"/configuration/gateway-options"}},s=[{value:"Configuration options",id:"configuration-options",children:[]},{value:"name",id:"name",children:[]},{value:"endpoint",id:"endpoint",children:[]},{value:"source_config_names",id:"source_config_names",children:[]},{value:"schema_polling_interval",id:"schema_polling_interval",children:[]}],p={toc:s};function l(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(i.a)({},p,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("p",null,"When ",Object(o.b)("em",{parentName:"p"},"not")," using Dashboard for configuration, the API Definitions are going to be read from the ",Object(o.b)("inlineCode",{parentName:"p"},"apis_path")," specified in\n",Object(o.b)("inlineCode",{parentName:"p"},"gateway.json"),"."),Object(o.b)("p",null,"Each file in that directory (either ",Object(o.b)("inlineCode",{parentName:"p"},"json")," or ",Object(o.b)("inlineCode",{parentName:"p"},"yaml"),") represents a GraphQL API, which in turn may have 1 or more data sources."),Object(o.b)("h2",{id:"configuration-options"},"Configuration options"),Object(o.b)("p",null,"The only required options of the file are ",Object(o.b)("inlineCode",{parentName:"p"},"name")," (name of the API) and ",Object(o.b)("inlineCode",{parentName:"p"},"endpoint")," (on which endpoint is it going to\nbe available):"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-json",metastring:'title="config/apidefs/my-first-api.json"',title:'"config/apidefs/my-first-api.json"'},'{\n  "name": "My First API",\n  "endpoint": "/my-first-api"\n}\n')),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"In fact, a GraphQL API can have 0 data sources but... that doesn't make a lot of sense in practice."))),Object(o.b)("p",null,"In order to add the data-sources to our API we have to specify the ",Object(o.b)("inlineCode",{parentName:"p"},"source_config_names")," option:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-json",metastring:'title="config/apidefs/my-first-api.json"',title:'"config/apidefs/my-first-api.json"'},'{\n  "name": "My First API",\n  "endpoint": "/my-first-api",\n  "source_config_names": ["my-data-source.yaml"]\n}\n')),Object(o.b)("div",{className:"admonition admonition-info alert alert--info"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"Only the file name is required, the path is going to be resolved from the ",Object(o.b)("inlineCode",{parentName:"p"},"sources_path")," option in ",Object(o.b)("inlineCode",{parentName:"p"},"gateway.json"),"."))),Object(o.b)("p",null,"Below is the list of all available configuration options."),Object(o.b)("h2",{id:"name"},"name"),Object(o.b)("p",null,"Name of the API. It is mainly used for logging purposes."),Object(o.b)("h2",{id:"endpoint"},"endpoint"),Object(o.b)("p",null,'A unique endpoint of this API. Should start with "/".'),Object(o.b)("h2",{id:"source_config_names"},"source_config_names"),Object(o.b)("p",null,"Optional. Contains a list of filenames (with ",Object(o.b)("inlineCode",{parentName:"p"},"json")," or ",Object(o.b)("inlineCode",{parentName:"p"},"yaml")," extension) of data-sources which should be included into\nthe API."),Object(o.b)("h2",{id:"schema_polling_interval"},"schema_polling_interval"),Object(o.b)("p",null,"Optional. When set to a number bigger than 0, it will rebuild the GraphQL Schema of the API in the specified intervals\n(in milliseconds)."),Object(o.b)("p",null,"This can be used to rebuild (in regular intervals) the federated schema for the underlying microservices. If during the\nrebuild phase at least one of the data-sources returned an error, the schema is not going to be rebuilt, and the old\nschema will continue to be served on the endpoint."),Object(o.b)("p",null,"schema_updates_through_control_api?: boolean;\nenable_ip_filtering?: boolean;\nallow_ips?: string[];\ndeny_ips?: string[];\n/**"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Argument of the bytes package's method parse ",Object(o.b)("a",{parentName:"li",href:"https://www.npmjs.com/package/bytes"},"https://www.npmjs.com/package/bytes"),"\n*/\nrequest_size_limit?: string | number;\n/**"),Object(o.b)("li",{parentName:"ul"},"Maximum GraphQL query depth\n*/\ndepth_limit?: number;\n/**"),Object(o.b)("li",{parentName:"ul"},"Maximum complexity for a request\n*/\nrequest_complexity_limit?: number;\n/**"),Object(o.b)("li",{parentName:"ul"},"Allowed queries summary complexity for a user in a period of time\n*/\nrate_limit?: {\ncomplexity: number;\nper: number;\n};\nauthentication?: {\nauth_header_name?: string;\nauth_tokens: string[];\n};\nmesh?: {")))}l.isMDXComponent=!0},84:function(e,n,t){"use strict";t.d(n,"a",(function(){return b})),t.d(n,"b",(function(){return u}));var i=t(0),a=t.n(i);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=a.a.createContext({}),l=function(e){var n=a.a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},b=function(e){var n=l(e.components);return a.a.createElement(p.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},m=a.a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,r=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),b=l(t),m=i,u=b["".concat(r,".").concat(m)]||b[m]||d[m]||o;return t?a.a.createElement(u,c(c({ref:n},p),{},{components:t})):a.a.createElement(u,c({ref:n},p))}));function u(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,r=new Array(o);r[0]=m;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:i,r[1]=c;for(var p=2;p<o;p++)r[p]=t[p];return a.a.createElement.apply(null,r)}return a.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"}}]);